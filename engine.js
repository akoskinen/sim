const _0x3f553d=_0x4368;(function(_0xc7b081,_0xc7df9a){const _0x4511f4=_0x4368,_0x5dddcd=_0xc7b081();while(!![]){try{const _0x36a508=parseInt(_0x4511f4(0xce))/0x1+parseInt(_0x4511f4(0x101))/0x2+-parseInt(_0x4511f4(0xba))/0x3+-parseInt(_0x4511f4(0x106))/0x4+-parseInt(_0x4511f4(0xff))/0x5+-parseInt(_0x4511f4(0xac))/0x6*(-parseInt(_0x4511f4(0xbf))/0x7)+parseInt(_0x4511f4(0x107))/0x8;if(_0x36a508===_0xc7df9a)break;else _0x5dddcd['push'](_0x5dddcd['shift']());}catch(_0x5625bb){_0x5dddcd['push'](_0x5dddcd['shift']());}}}(_0x1712,0x3b23f));const canvas=document['getElementById'](_0x3f553d(0xd3)),ctx=canvas['getContext']('2d');let currentTrackKey=_0x3f553d(0xb0),currentTrack=trackConfigs[currentTrackKey],buoyPixels=[],buoys=[],timingLine={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0},trackOffset={'x':0x0,'y':0x0};function _0x4368(_0x31cd92,_0x5a7b63){const _0x171258=_0x1712();return _0x4368=function(_0x436832,_0x6273b9){_0x436832=_0x436832-0xac;let _0x4d644e=_0x171258[_0x436832];return _0x4d644e;},_0x4368(_0x31cd92,_0x5a7b63);}function computeBuoys(){const _0xc3c75e=_0x3f553d;buoyPixels=currentTrack['buoys'][_0xc3c75e(0x123)](_0xa81c46=>({'x':_0xa81c46['x']*currentTrack[_0xc3c75e(0xdf)],'y':canvas['height']-_0xa81c46['y']*currentTrack[_0xc3c75e(0xdf)]}));const _0x576f10=buoyPixels[_0xc3c75e(0xc6)]((_0x2241da,_0x4923f0)=>({'x':_0x2241da['x']+_0x4923f0['x'],'y':_0x2241da['y']+_0x4923f0['y']}),{'x':0x0,'y':0x0});_0x576f10['x']/=buoyPixels['length'],_0x576f10['y']/=buoyPixels[_0xc3c75e(0x132)],trackOffset['x']=canvas[_0xc3c75e(0xef)]/0x2-_0x576f10['x'],trackOffset['y']=canvas['height']/0x2-_0x576f10['y'],buoys=buoyPixels[_0xc3c75e(0x123)](_0x562ce0=>({'x':_0x562ce0['x']+trackOffset['x'],'y':_0x562ce0['y']+trackOffset['y']})),timingLine=currentTrack[_0xc3c75e(0xae)](buoys,canvas);}const windAudio=document[_0x3f553d(0xfa)](_0x3f553d(0xb5)),musicAudio=document[_0x3f553d(0xfa)]('musicAudio'),boomStopAudio=document['getElementById'](_0x3f553d(0x12e)),collisionAudio=document[_0x3f553d(0xfa)](_0x3f553d(0x115));function fadeOutMusic(){const _0x448d11=_0x3f553d;if(!musicAudio[_0x448d11(0xc1)]){let _0x1630b9=0x1;const _0x32431e=0x32,_0x4c6d99=0x1388/_0x32431e,_0x4d9dee=0x1/_0x32431e;!function _0x5b656e(){const _0x507e17=_0x448d11;_0x1630b9=Math[_0x507e17(0xd7)](0x0,_0x1630b9-_0x4d9dee),musicAudio[_0x507e17(0xe6)]=_0x1630b9,_0x1630b9>0x0?setTimeout(_0x5b656e,_0x4c6d99):(musicAudio['pause'](),musicAudio[_0x507e17(0xc8)]=0x0,musicAudio['volume']=0x1);}();}}function enableAudio(){const _0x2cabeb=_0x3f553d;windAudio[_0x2cabeb(0xfe)]()[_0x2cabeb(0x108)](_0x2d29ab=>console[_0x2cabeb(0xb2)](_0x2cabeb(0x113),_0x2d29ab)),document[_0x2cabeb(0x121)](_0x2cabeb(0x127),enableAudio);}function resizeCanvas(){const _0xdfd2df=_0x3f553d;canvas['width']=window[_0xdfd2df(0xd5)],canvas[_0xdfd2df(0x122)]=window[_0xdfd2df(0x10c)],computeBuoys();}musicAudio[_0x3f553d(0xea)]=!0x0,document['addEventListener'](_0x3f553d(0x127),enableAudio,{'once':!0x0}),window[_0x3f553d(0x117)]('resize',resizeCanvas);const trackRadios=document[_0x3f553d(0xdb)](_0x3f553d(0xc4));trackRadios['forEach'](_0x4570ad=>{const _0x110c70=_0x3f553d;_0x4570ad['addEventListener'](_0x110c70(0xcd),function(){const _0x1dba33=_0x110c70;this[_0x1dba33(0xf4)]&&(currentTrackKey=this[_0x1dba33(0x11e)],currentTrack=trackConfigs[currentTrackKey],computeBuoys());});});const maxSpeed=0x64,timeToMaxSpeed=0x12,accelRate=maxSpeed/0x12,decelRate=12.333,speedConversion=0.6,speedScale=0.837,BANK_ANGLE_MAX=0x37,bankRate0to30=0x28,bankRate30to55=0xa;let bankAngleDeg=0x0;const bankDecay=0.9;function updateBankAngle(_0x172034){const _0x1e59c8=_0x3f553d;let _0x53c3d1=0x0;if(keys[_0x1e59c8(0xe9)]&&(_0x53c3d1=-0x1),keys[_0x1e59c8(0xf0)]&&(_0x53c3d1=0x1),0x0!==_0x53c3d1){let _0x11cbe1=Math[_0x1e59c8(0x11f)](bankAngleDeg),_0x1bdc93=Math[_0x1e59c8(0xc0)](bankAngleDeg);0x0===_0x1bdc93&&(_0x1bdc93=_0x53c3d1),_0x1bdc93!==_0x53c3d1&&(_0x11cbe1=0x0,bankAngleDeg=0x0,_0x1bdc93=_0x53c3d1),_0x11cbe1+=(_0x11cbe1<0x1e?bankRate0to30:bankRate30to55)*_0x172034,_0x11cbe1>BANK_ANGLE_MAX&&(_0x11cbe1=BANK_ANGLE_MAX),bankAngleDeg=_0x1bdc93*_0x11cbe1;}else{if(Math[_0x1e59c8(0x11f)](bankAngleDeg)<0.5)bankAngleDeg=0x0;else{const _0x14df38=Math[_0x1e59c8(0x118)](bankDecay,0x3c*_0x172034);bankAngleDeg*=_0x14df38,Math[_0x1e59c8(0x11f)](bankAngleDeg)<0.05&&(bankAngleDeg=0x0);}}}const baseline30Data=[{'speed':0xa,'radius':0xa},{'speed':0xf,'radius':0xf},{'speed':0x1e,'radius':0x1e},{'speed':0x28,'radius':0x41},{'speed':0x3c,'radius':0x50}],reduceData=[{'speed':0xa,'factor':0.85},{'speed':0xf,'factor':0.82},{'speed':0x1e,'factor':0.83},{'speed':0x28,'factor':0.85},{'speed':0x3c,'factor':0.9}];function interpPiecewise(_0x563a4d,_0x33161b){const _0x4f8211=_0x3f553d;let _0x278dee=Math[_0x4f8211(0xd7)](0xa,Math[_0x4f8211(0xcf)](0x3c,_0x33161b));for(let _0x28467b=0x1;_0x28467b<_0x563a4d[_0x4f8211(0x132)];_0x28467b++){const _0x614091=_0x563a4d[_0x28467b-0x1],_0x23c411=_0x563a4d[_0x28467b];if(_0x278dee>=_0x614091[_0x4f8211(0xfb)]&&_0x278dee<=_0x23c411[_0x4f8211(0xfb)]){const _0x446cce=_0x23c411[_0x4f8211(0xfb)]-_0x614091['speed'],_0x59089b=(_0x278dee-_0x614091[_0x4f8211(0xfb)])/_0x446cce,_0x14272a=void 0x0!==_0x614091['radius']?_0x614091[_0x4f8211(0xcb)]:_0x614091[_0x4f8211(0xbe)];return _0x14272a+((void 0x0!==_0x23c411[_0x4f8211(0xcb)]?_0x23c411[_0x4f8211(0xcb)]:_0x23c411['factor'])-_0x14272a)*_0x59089b;}}if(_0x278dee<=_0x563a4d[0x0][_0x4f8211(0xfb)])return void 0x0!==_0x563a4d[0x0][_0x4f8211(0xcb)]?_0x563a4d[0x0][_0x4f8211(0xcb)]:_0x563a4d[0x0][_0x4f8211(0xbe)];const _0x1b6138=_0x563a4d[_0x563a4d['length']-0x1];return void 0x0!==_0x1b6138['radius']?_0x1b6138[_0x4f8211(0xcb)]:_0x1b6138[_0x4f8211(0xbe)];}function getTurnRadius(_0x21d9c1,_0x5cfd17){const _0x249dea=_0x3f553d;let _0x13cb5c=Math[_0x249dea(0xd7)](0x0,Math[_0x249dea(0xcf)](0x37,_0x5cfd17));const _0x5c238e=interpPiecewise(baseline30Data,_0x21d9c1),_0x288d5e=_0x5c238e*interpPiecewise(reduceData,_0x21d9c1);if(_0x13cb5c<0x1e){const _0x24baa7=0x1388;return _0x24baa7+_0x13cb5c/0x1e*(_0x5c238e-_0x24baa7);}if(_0x13cb5c<=0x32)return _0x5c238e+(_0x13cb5c-0x1e)/0x14*(_0x288d5e-_0x5c238e);return _0x288d5e;}const turnGain=0xf,lowFactor=0.02084;let heading=0x0,speed=0x0;const pos={'x':0x0,'y':0x0};let oldPos={'x':0x0,'y':0x0},lapActive=!0x1,lapStartTime=0x0,currentLapTime=0x0;const laps=[];let distanceTraveled=0x0,topSpeedKmh=0x0,minSpeedKmh=0x1/0x0,sumSpeeds=0x0,frameCount=0x0,lastPosTelemetry={'x':0x0,'y':0x0},collidedThisLap=!0x1,penaltySeconds=0x0,ghostData=null,recordedGhost=[];function pixelToTrackMeters(_0x499634,_0x3332b8){const _0x5c0f30=_0x3f553d,_0xbdf593=_0x499634-trackOffset['x'],_0x3cfb34=_0x3332b8-trackOffset['y'];return{'x':_0xbdf593/currentTrack[_0x5c0f30(0xdf)],'y':(canvas[_0x5c0f30(0x122)]-_0x3cfb34)/currentTrack[_0x5c0f30(0xdf)]};}function trackMetersToPixel(_0x9daf63,_0x33a370){const _0x1d8a28=_0x3f553d,_0x3ee71d=_0x9daf63*currentTrack[_0x1d8a28(0xdf)],_0x1cb149=canvas[_0x1d8a28(0x122)]-_0x33a370*currentTrack['scale'];return{'x':_0x3ee71d+trackOffset['x'],'y':_0x1cb149+trackOffset['y']};}function recordGhostData(_0x1c54b7){const _0x1e8075=_0x3f553d;if(!lapActive)return;const _0x40c15a=pixelToTrackMeters(pos['x'],pos['y']);recordedGhost[_0x1e8075(0xc9)]({'time':_0x1c54b7,'x':_0x40c15a['x'],'y':_0x40c15a['y'],'heading':heading});}function getGhostPosition(_0x3595be){const _0x43a7ca=_0x3f553d;if(!ghostData||!ghostData[_0x43a7ca(0xe5)]||0x0===ghostData[_0x43a7ca(0xe5)][_0x43a7ca(0x132)])return null;const _0x4f6b67=ghostData['frames'];for(let _0x108aef=0x1;_0x108aef<_0x4f6b67[_0x43a7ca(0x132)];_0x108aef++){const _0x5bbee3=_0x4f6b67[_0x108aef-0x1],_0x356889=_0x4f6b67[_0x108aef];if(_0x5bbee3['time']<=_0x3595be&&_0x356889[_0x43a7ca(0xcc)]>=_0x3595be){const _0x56f0e6=(_0x3595be-_0x5bbee3[_0x43a7ca(0xcc)])/(_0x356889['time']-_0x5bbee3[_0x43a7ca(0xcc)]);return{'x':_0x5bbee3['x']+_0x56f0e6*(_0x356889['x']-_0x5bbee3['x']),'y':_0x5bbee3['y']+_0x56f0e6*(_0x356889['y']-_0x5bbee3['y']),'heading':_0x5bbee3[_0x43a7ca(0xf1)]+_0x56f0e6*(_0x356889['heading']-_0x5bbee3['heading'])};}}const _0x122be9=_0x4f6b67[_0x4f6b67[_0x43a7ca(0x132)]-0x1];return _0x3595be>_0x122be9[_0x43a7ca(0xcc)]?_0x122be9:_0x4f6b67[0x0];}function drawGhost(_0x44bf9c){const _0x31fbe5=_0x3f553d;if(!lapActive||!ghostData||!ghostData[_0x31fbe5(0xe5)])return;const _0x1fd487=getGhostPosition(_0x44bf9c);if(!_0x1fd487)return;const {x:_0x205430,y:_0x5689c1}=trackMetersToPixel(_0x1fd487['x'],_0x1fd487['y']);ctx[_0x31fbe5(0x12d)](),ctx['globalAlpha']=0.25,ctx[_0x31fbe5(0x100)](_0x205430,_0x5689c1),ctx[_0x31fbe5(0xf8)](_0x1fd487['heading']-Math['PI']/0x2),ctx[_0x31fbe5(0xc2)](),ctx[_0x31fbe5(0xdd)](0x0,12.5),ctx[_0x31fbe5(0x12f)](0x4,7.5,0x4,-7.5,0x0,-12.5),ctx[_0x31fbe5(0x12f)](-0x4,-7.5,-0x4,7.5,0x0,12.5),ctx[_0x31fbe5(0xbd)](),ctx[_0x31fbe5(0x10e)]=_0x31fbe5(0x111),ctx[_0x31fbe5(0xca)](),ctx[_0x31fbe5(0xec)](),ctx[_0x31fbe5(0xaf)]=0x1;}function startLap(){const _0x5aa5d1=_0x3f553d;lapStartTime=performance[_0x5aa5d1(0x103)](),currentLapTime=0x0,lapActive=!0x0,distanceTraveled=0x0,topSpeedKmh=0x0,minSpeedKmh=0x1/0x0,sumSpeeds=0x0,frameCount=0x0,lastPosTelemetry['x']=pos['x'],lastPosTelemetry['y']=pos['y'],collidedThisLap=!0x1,penaltySeconds=0x0,recordedGhost=[];}function finalizeLap(){const _0x318d78=_0x3f553d;lapActive=!0x1;const _0x33add5=(performance[_0x318d78(0x103)]()-lapStartTime)/0x3e8;currentLapTime=_0x33add5+penaltySeconds;const _0x2f5b86=frameCount>0x0?sumSpeeds/frameCount:0x0;laps[_0x318d78(0xc5)]({'topSpeed':topSpeedKmh,'minSpeed':minSpeedKmh===0x1/0x0?0x0:minSpeedKmh,'avgSpeed':_0x2f5b86,'distance':distanceTraveled,'finalTime':currentLapTime}),laps[_0x318d78(0x132)]>0x4&&laps[_0x318d78(0x10d)](),ghostData={'trackKey':currentTrackKey,'frames':recordedGhost['slice']()};}const keys={};function orientation(_0x57aff7,_0x594f3f,_0x448648){return(_0x594f3f['y']-_0x57aff7['y'])*(_0x448648['x']-_0x594f3f['x'])-(_0x594f3f['x']-_0x57aff7['x'])*(_0x448648['y']-_0x594f3f['y']);}function linesIntersect(_0xc7c3c,_0xe9a32,_0x12b638,_0x22b751,_0x3256ae,_0x298636,_0x2e6ed0,_0x502827){const _0x1f6e82={'x':_0xc7c3c,'y':_0xe9a32},_0x23b2a0={'x':_0x12b638,'y':_0x22b751},_0x4c030e={'x':_0x3256ae,'y':_0x298636},_0x359823={'x':_0x2e6ed0,'y':_0x502827},_0x1220f8=orientation(_0x1f6e82,_0x23b2a0,_0x4c030e),_0x4b5c3a=orientation(_0x1f6e82,_0x23b2a0,_0x359823),_0x214d4e=orientation(_0x4c030e,_0x359823,_0x1f6e82),_0x29de3a=orientation(_0x4c030e,_0x359823,_0x23b2a0);return(_0x1220f8>0x0&&_0x4b5c3a<0x0||_0x1220f8<0x0&&_0x4b5c3a>0x0)&&(_0x214d4e>0x0&&_0x29de3a<0x0||_0x214d4e<0x0&&_0x29de3a>0x0);}function checkLapCrossing(){const _0x4a797c=_0x3f553d;0x0!==pos['x']&&pos['x']!==canvas['width']&&0x0!==pos['y']&&pos['y']!==canvas[_0x4a797c(0x122)]&&linesIntersect(oldPos['x'],oldPos['y'],pos['x'],pos['y'],timingLine['x1'],timingLine['y1'],timingLine['x2'],timingLine['y2'])&&(lapActive?(finalizeLap(),boomStopAudio[_0x4a797c(0xc8)]=0x0,boomStopAudio[_0x4a797c(0xfe)]()[_0x4a797c(0x108)](_0x322771=>console[_0x4a797c(0xb2)](_0x4a797c(0x11a),_0x322771)),fadeOutMusic()):(startLap(),musicAudio[_0x4a797c(0xe6)]=0x1,musicAudio[_0x4a797c(0xc8)]=0x0,musicAudio[_0x4a797c(0xfe)]()['catch'](_0x888d6b=>console[_0x4a797c(0xb2)]('Music\x20play\x20fail',_0x888d6b))));}function checkBuoyCollisions(){const _0x243ef0=_0x3f553d;if(lapActive&&!collidedThisLap)for(const _0xd793ee of buoys){const _0x5423b5=_0xd793ee['x']-pos['x'],_0x5e9455=_0xd793ee['y']-pos['y'];if(Math[_0x243ef0(0x130)](_0x5423b5,_0x5e9455)<0xc){penaltySeconds+=0xa,collidedThisLap=!0x0,collisionAudio[_0x243ef0(0xc8)]=0x0,collisionAudio['play']()[_0x243ef0(0x108)](_0x55c2dd=>console[_0x243ef0(0xb2)](_0x243ef0(0xc3),_0x55c2dd));break;}}}function update(_0x13fba4){const _0x4752e3=_0x3f553d;oldPos['x']=pos['x'],oldPos['y']=pos['y'],keys[_0x4752e3(0x112)]&&(speed+=accelRate*_0x13fba4),keys['ArrowDown']&&(speed-=decelRate*_0x13fba4),speed=Math[_0x4752e3(0xd7)](0x0,Math['min'](maxSpeed,speed)),updateBankAngle(_0x13fba4);const _0x5f1a41=speed*speedConversion,_0x376f23=getTurnRadius(_0x5f1a41,Math[_0x4752e3(0x11f)](bankAngleDeg)),_0x583187=bankAngleDeg*Math['PI']/0xb4,_0x47fbcc=Math['sign'](bankAngleDeg)*(Math['abs'](_0x583187)*turnGain)*(0x1/_0x376f23+lowFactor);heading+=_0x47fbcc*_0x13fba4,pos['x']+=speed*speedScale*_0x13fba4*Math[_0x4752e3(0x10f)](heading),pos['y']+=speed*speedScale*_0x13fba4*Math[_0x4752e3(0xe7)](heading);let _0x47d730=!0x1;if(pos['x']>canvas['width']?(pos['x']=0x0,_0x47d730=!0x0):pos['x']<0x0&&(pos['x']=canvas[_0x4752e3(0xef)],_0x47d730=!0x0),pos['y']>canvas[_0x4752e3(0x122)]?(pos['y']=0x0,_0x47d730=!0x0):pos['y']<0x0&&(pos['y']=canvas['height'],_0x47d730=!0x0),windAudio[_0x4752e3(0xe6)]=speed/maxSpeed,document[_0x4752e3(0xfa)](_0x4752e3(0xed))[_0x4752e3(0x109)]=_0x4752e3(0x110)+_0x5f1a41[_0x4752e3(0x102)](0x1)+'\x20km/h',document[_0x4752e3(0xfa)](_0x4752e3(0xb1))[_0x4752e3(0x109)]=_0x4752e3(0x104)+bankAngleDeg[_0x4752e3(0x102)](0x0)+'°',_0x47d730||checkLapCrossing(),lapActive){_0x5f1a41>topSpeedKmh&&(topSpeedKmh=_0x5f1a41),_0x5f1a41<minSpeedKmh&&(minSpeedKmh=_0x5f1a41),sumSpeeds+=_0x5f1a41,frameCount++;const _0x383617=pos['x']-lastPosTelemetry['x'],_0x37972d=pos['y']-lastPosTelemetry['y'],_0x3b47e8=Math['hypot'](_0x383617,_0x37972d)/currentTrack['scale'];distanceTraveled+=_0x3b47e8,lastPosTelemetry['x']=pos['x'],lastPosTelemetry['y']=pos['y'],checkBuoyCollisions();const _0x3fce07=(performance[_0x4752e3(0x103)]()-lapStartTime)/0x3e8;recordGhostData(_0x3fce07);const _0x384049=_0x3fce07+penaltySeconds;document[_0x4752e3(0xfa)](_0x4752e3(0x120))[_0x4752e3(0x109)]=penaltySeconds>0x0&&collidedThisLap?_0x4752e3(0xe1)+_0x384049[_0x4752e3(0x102)](0x2)+_0x4752e3(0xb9)+penaltySeconds+_0x4752e3(0xe0):_0x4752e3(0xe1)+_0x384049[_0x4752e3(0x102)](0x2);}else document[_0x4752e3(0xfa)](_0x4752e3(0x120))['innerText']=penaltySeconds>0x0?_0x4752e3(0xe1)+currentLapTime[_0x4752e3(0x102)](0x2)+_0x4752e3(0xb9)+penaltySeconds+_0x4752e3(0xe0):_0x4752e3(0xe1)+currentLapTime[_0x4752e3(0x102)](0x2);}document[_0x3f553d(0x117)](_0x3f553d(0x127),_0x27a09a=>{keys[_0x27a09a['key']]=!0x0;}),document[_0x3f553d(0x117)](_0x3f553d(0xf6),_0x48e285=>{const _0x3ddbe1=_0x3f553d;keys[_0x48e285[_0x3ddbe1(0x125)]]=!0x1;});let wakeTrail=[];function totalTrailDistance(_0x224396){const _0x41d224=_0x3f553d;let _0x57b996=0x0;for(let _0x178f8f=0x1;_0x178f8f<_0x224396[_0x41d224(0x132)];_0x178f8f++)_0x57b996+=Math[_0x41d224(0x130)](_0x224396[_0x178f8f]['x']-_0x224396[_0x178f8f-0x1]['x'],_0x224396[_0x178f8f]['y']-_0x224396[_0x178f8f-0x1]['y']);return _0x57b996;}function drawWake(){const _0x3d1c8a=_0x3f553d;if(!(wakeTrail['length']<0x2))for(let _0x34ef21=0x1;_0x34ef21<wakeTrail[_0x3d1c8a(0x132)];_0x34ef21++){const _0x458517=_0x34ef21/wakeTrail[_0x3d1c8a(0x132)];ctx['beginPath'](),ctx[_0x3d1c8a(0xdd)](wakeTrail[_0x34ef21-0x1]['x'],wakeTrail[_0x34ef21-0x1]['y']),ctx['lineTo'](wakeTrail[_0x34ef21]['x'],wakeTrail[_0x34ef21]['y']),ctx['strokeStyle']=_0x3d1c8a(0x10a)+_0x458517['toFixed'](0x2)+')',ctx[_0x3d1c8a(0xc7)]=0x2,ctx[_0x3d1c8a(0xf5)]();}}function drawTrack(){const _0x1b7894=_0x3f553d;buoys[_0x1b7894(0x12a)](_0x101066=>{const _0x4a53c5=_0x1b7894;ctx[_0x4a53c5(0xc2)](),ctx[_0x4a53c5(0x119)](_0x101066['x'],_0x101066['y'],0x8,0x0,0x2*Math['PI']),ctx[_0x4a53c5(0x10e)]=_0x4a53c5(0x116),ctx['fill'](),ctx[_0x4a53c5(0xc7)]=0x2,ctx['strokeStyle']=_0x4a53c5(0xe8),ctx['stroke']();}),ctx[_0x1b7894(0xc2)](),ctx[_0x1b7894(0xdd)](timingLine['x1'],timingLine['y1']),ctx[_0x1b7894(0xee)](timingLine['x2'],timingLine['y2']),ctx[_0x1b7894(0x131)]=_0x1b7894(0xe2),ctx[_0x1b7894(0xc7)]=0x1,ctx[_0x1b7894(0xf5)]();}function drawTelemetry(){const _0x6a3658=_0x3f553d;ctx[_0x6a3658(0x12d)](),ctx[_0x6a3658(0xf7)]=_0x6a3658(0x11c),ctx[_0x6a3658(0x10e)]=_0x6a3658(0xe8);let _0x49c7c8=0x14,_0x2d7811=0x32;ctx[_0x6a3658(0xd8)](_0x6a3658(0x11d),_0x49c7c8,_0x2d7811),_0x2d7811+=0x14,laps[_0x6a3658(0x12a)]((_0x4b9a3c,_0x478ac9)=>{const _0x3a2c33=_0x6a3658;ctx[_0x3a2c33(0xd8)](_0x3a2c33(0xd1)+(_0x478ac9+0x1)+':',_0x49c7c8,_0x2d7811),_0x2d7811+=0x12,ctx['fillText']('\x20\x20Time:\x20\x20\x20'+_0x4b9a3c[_0x3a2c33(0xf3)]['toFixed'](0x2)+'\x20s',_0x49c7c8,_0x2d7811),_0x2d7811+=0x12,ctx[_0x3a2c33(0xd8)]('\x20\x20Dist:\x20\x20\x20'+_0x4b9a3c[_0x3a2c33(0x105)][_0x3a2c33(0x102)](0x1)+'\x20m',_0x49c7c8,_0x2d7811),_0x2d7811+=0x12,ctx['fillText'](_0x3a2c33(0xdc)+_0x4b9a3c['topSpeed'][_0x3a2c33(0x102)](0x1)+_0x3a2c33(0xf2),_0x49c7c8,_0x2d7811),_0x2d7811+=0x12,ctx['fillText'](_0x3a2c33(0x11b)+_0x4b9a3c[_0x3a2c33(0xb6)][_0x3a2c33(0x102)](0x1)+_0x3a2c33(0xf2),_0x49c7c8,_0x2d7811),_0x2d7811+=0x12,ctx[_0x3a2c33(0xd8)]('\x20\x20AvgSpd:\x20'+_0x4b9a3c[_0x3a2c33(0x10b)][_0x3a2c33(0x102)](0x1)+_0x3a2c33(0xf2),_0x49c7c8,_0x2d7811),_0x2d7811+=0x18;}),ctx[_0x6a3658(0xec)]();}function drawRacer(){const _0x5353a6=_0x3f553d;ctx['save'](),ctx[_0x5353a6(0x100)](pos['x'],pos['y']),ctx['rotate'](heading-Math['PI']/0x2),ctx['beginPath'](),ctx[_0x5353a6(0xdd)](0x0,12.5),ctx[_0x5353a6(0x12f)](0x4,7.5,0x4,-7.5,0x0,-12.5),ctx['bezierCurveTo'](-0x4,-7.5,-0x4,7.5,0x0,12.5),ctx[_0x5353a6(0xbd)](),ctx[_0x5353a6(0x10e)]=_0x5353a6(0x114),ctx[_0x5353a6(0xca)](),ctx['restore']();}function drawGhostFrame(){const _0x12540f=_0x3f553d;if(lapActive)drawGhost((performance[_0x12540f(0x103)]()-lapStartTime)/0x3e8);else drawGhost(currentLapTime);}let lastTimestamp=0x0;function gameLoop(_0x1f9d77){const _0x98b25c=_0x3f553d;lastTimestamp||(lastTimestamp=_0x1f9d77);let _0x4e7f4c=(_0x1f9d77-lastTimestamp)/0x3e8;lastTimestamp=_0x1f9d77,_0x4e7f4c>0.1&&(_0x4e7f4c=0.1),wakeTrail[_0x98b25c(0xc9)]({'x':pos['x'],'y':pos['y']});const _0xa15ce9=speed/maxSpeed*0xc8;for(;wakeTrail[_0x98b25c(0x132)]>0x1&&totalTrailDistance(wakeTrail)>_0xa15ce9;)wakeTrail[_0x98b25c(0x133)]();update(_0x4e7f4c),ctx[_0x98b25c(0x126)](0x0,0x0,canvas['width'],canvas[_0x98b25c(0x122)]),ctx[_0x98b25c(0x10e)]=_0x98b25c(0xd6),ctx[_0x98b25c(0xb8)](0x0,0x0,canvas[_0x98b25c(0xef)],canvas[_0x98b25c(0x122)]),drawTrack(),drawWake(),drawGhostFrame(),drawRacer(),drawTelemetry(),requestAnimationFrame(gameLoop);}const exportGhostBtn=document[_0x3f553d(0xfa)](_0x3f553d(0xda)),importGhostFile=document[_0x3f553d(0xfa)](_0x3f553d(0xfd)),clearGhostBtn=document[_0x3f553d(0xfa)](_0x3f553d(0xad));function _0x1712(){const _0x59e919=['text','scale','s\x20penalty!)','Laptime:\x20','red','\x22\x20which\x20doesn\x27t\x20exist\x20here!','target','frames','volume','sin','#fff','ArrowLeft','loop','lapData.json','restore','speedDisplay','lineTo','width','ArrowRight','heading','\x20km/h','finalTime','checked','stroke','keyup','font','rotate','href','getElementById','speed','trackKey','importGhostFile','play','442870Uwblgd','translate','878856oNuaLL','toFixed','now','Bank:\x20','distance','1911816PqPRax','1430232mZRYEx','catch','innerText','rgba(255,255,255,','avgSpeed','innerHeight','pop','fillStyle','cos','Speed:\x20','#ff88ff','ArrowUp','Wind\x20audio\x20failed','#00ccff','collisionAudio','#FFFF00','addEventListener','pow','arc','Boom\x20stop\x20fail','\x20\x20MinSpd:\x20','14px\x20monospace','Telemetry:','value','abs','lapTimeDisplay','removeEventListener','height','map','Warning:\x20The\x20ghost\x20uses\x20trackKey\x20\x22','key','clearRect','keydown','download','body','forEach','Ghost\x20data\x20cleared.','Ghost\x20data\x20imported\x20successfully!\x20It\x20will\x20appear\x20on\x20your\x20next\x20lap.','save','boomStopAudio','bezierCurveTo','hypot','strokeStyle','length','shift','1065324iekOre','clearGhostBtn','computeTimingLine','globalAlpha','speedTrack','bankAngleDisplay','warn','isArray','files','windAudio','minSpeed','createObjectURL','fillRect','\x20(-\x20','797886tpmZif','No\x20ghost\x20data\x20to\x20export\x20yet.\x20Complete\x20at\x20least\x20one\x20lap.','Invalid\x20ghost\x20data\x20file.','closePath','factor','7UBliXs','sign','paused','beginPath','Collision\x20audio\x20fail','input[name=\x22track\x22]','unshift','reduce','lineWidth','currentTime','push','fill','radius','time','change','278968szxtEp','min','parse','Lap\x20','click','gameCanvas','createElement','innerWidth','#222','max','fillText','application/json','exportGhostBtn','querySelectorAll','\x20\x20TopSpd:\x20','moveTo'];_0x1712=function(){return _0x59e919;};return _0x1712();}exportGhostBtn[_0x3f553d(0x117)]('click',()=>{const _0x259173=_0x3f553d;if(!ghostData||!ghostData[_0x259173(0xe5)]||0x0===ghostData[_0x259173(0xe5)]['length'])return void alert(_0x259173(0xbb));const _0x40e55a=JSON['stringify'](ghostData),_0x446358=new Blob([_0x40e55a],{'type':_0x259173(0xd9)}),_0x5838db=URL[_0x259173(0xb7)](_0x446358),_0x51dc57=document[_0x259173(0xd4)]('a');_0x51dc57[_0x259173(0xf9)]=_0x5838db,_0x51dc57[_0x259173(0x128)]=_0x259173(0xeb),document['body']['appendChild'](_0x51dc57),_0x51dc57['click'](),document[_0x259173(0x129)]['removeChild'](_0x51dc57),URL['revokeObjectURL'](_0x5838db);}),importGhostFile[_0x3f553d(0x117)]('change',async _0x4a80de=>{const _0x4111ca=_0x3f553d,_0x11904d=_0x4a80de[_0x4111ca(0xe4)][_0x4111ca(0xb4)][0x0];if(_0x11904d)try{const _0x2f9e62=await _0x11904d[_0x4111ca(0xde)](),_0x2d51e0=JSON[_0x4111ca(0xd0)](_0x2f9e62);if(!_0x2d51e0['frames']||!Array[_0x4111ca(0xb3)](_0x2d51e0[_0x4111ca(0xe5)]))return void alert(_0x4111ca(0xbc));_0x2d51e0[_0x4111ca(0xfc)]&&trackConfigs[_0x2d51e0[_0x4111ca(0xfc)]]?(currentTrackKey=_0x2d51e0[_0x4111ca(0xfc)],currentTrack=trackConfigs[currentTrackKey],computeBuoys()):_0x2d51e0[_0x4111ca(0xfc)]&&alert(_0x4111ca(0x124)+_0x2d51e0['trackKey']+_0x4111ca(0xe3)),ghostData=_0x2d51e0,alert(_0x4111ca(0x12c));}catch(_0x296bb0){alert('Failed\x20to\x20read\x20file:\x20'+_0x296bb0);}}),clearGhostBtn[_0x3f553d(0x117)](_0x3f553d(0xd2),()=>{const _0x6a71d7=_0x3f553d;ghostData=null,alert(_0x6a71d7(0x12b));}),resizeCanvas(),pos['x']=canvas[_0x3f553d(0xef)]/0x2,pos['y']=canvas[_0x3f553d(0x122)]/0x2,requestAnimationFrame(gameLoop);
