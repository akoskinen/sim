const _0x4e7ef5=_0x24a9;(function(_0x4abd38,_0x367729){const _0x244e48=_0x24a9,_0x5eb77a=_0x4abd38();while(!![]){try{const _0x1e1758=-parseInt(_0x244e48(0x198))/0x1+parseInt(_0x244e48(0x1f1))/0x2+-parseInt(_0x244e48(0x184))/0x3+parseInt(_0x244e48(0x1a1))/0x4*(parseInt(_0x244e48(0x1f2))/0x5)+-parseInt(_0x244e48(0x1a3))/0x6+parseInt(_0x244e48(0x1e6))/0x7+-parseInt(_0x244e48(0x1bd))/0x8*(-parseInt(_0x244e48(0x190))/0x9);if(_0x1e1758===_0x367729)break;else _0x5eb77a['push'](_0x5eb77a['shift']());}catch(_0x5e471f){_0x5eb77a['push'](_0x5eb77a['shift']());}}}(_0x1cd8,0xb0697));const canvas=document[_0x4e7ef5(0x188)](_0x4e7ef5(0x1ac)),ctx=canvas[_0x4e7ef5(0x1d9)]('2d');let currentTrack=trackConfigs[_0x4e7ef5(0x1cd)],buoyPixels=[],buoys=[],timingLine={'x1':0x0,'y1':0x0,'x2':0x0,'y2':0x0};function computeBuoys(){const _0x4be12f=_0x4e7ef5;buoyPixels=currentTrack['buoys'][_0x4be12f(0x1f3)](_0x3b68a1=>({'x':_0x3b68a1['x']*currentTrack[_0x4be12f(0x1ad)],'y':canvas[_0x4be12f(0x1c8)]-_0x3b68a1['y']*currentTrack['scale']}));const _0x5d056d=buoyPixels['reduce']((_0x2f547f,_0x5d90cb)=>({'x':_0x2f547f['x']+_0x5d90cb['x'],'y':_0x2f547f['y']+_0x5d90cb['y']}),{'x':0x0,'y':0x0});_0x5d056d['x']/=buoyPixels[_0x4be12f(0x1b1)],_0x5d056d['y']/=buoyPixels[_0x4be12f(0x1b1)];const _0x1e7332=canvas[_0x4be12f(0x1a0)]/0x2-_0x5d056d['x'],_0x28936d=canvas[_0x4be12f(0x1c8)]/0x2-_0x5d056d['y'];buoys=buoyPixels[_0x4be12f(0x1f3)](_0x5a227f=>({'x':_0x5a227f['x']+_0x1e7332,'y':_0x5a227f['y']+_0x28936d})),timingLine=currentTrack[_0x4be12f(0x1bf)](buoys,canvas);}const windAudio=document[_0x4e7ef5(0x188)](_0x4e7ef5(0x1ef)),musicAudio=document[_0x4e7ef5(0x188)]('musicAudio'),boomStopAudio=document[_0x4e7ef5(0x188)]('boomStopAudio'),collisionAudio=document[_0x4e7ef5(0x188)](_0x4e7ef5(0x1db));function fadeOutMusic(){const _0x22c459=_0x4e7ef5;if(!musicAudio[_0x22c459(0x1ea)]){let _0x4691a1=0x1;const _0x1c4329=0x32,_0x2d5c66=0x1388/_0x1c4329,_0x569fb2=0x1/_0x1c4329;!function _0x3ad411(){const _0x311af2=_0x22c459;_0x4691a1=Math[_0x311af2(0x18e)](0x0,_0x4691a1-_0x569fb2),musicAudio[_0x311af2(0x1ba)]=_0x4691a1,_0x4691a1>0x0?setTimeout(_0x3ad411,_0x2d5c66):(musicAudio[_0x311af2(0x1e0)](),musicAudio['currentTime']=0x0,musicAudio[_0x311af2(0x1ba)]=0x1);}();}}function enableAudio(){const _0x2c6b22=_0x4e7ef5;windAudio[_0x2c6b22(0x1ec)]()['catch'](_0x1dcf01=>console['warn']('Wind\x20audio\x20failed',_0x1dcf01)),document[_0x2c6b22(0x191)](_0x2c6b22(0x1f4),enableAudio);}function resizeCanvas(){const _0x4d497a=_0x4e7ef5;canvas[_0x4d497a(0x1a0)]=window[_0x4d497a(0x1c6)],canvas[_0x4d497a(0x1c8)]=window[_0x4d497a(0x185)],computeBuoys();}musicAudio['loop']=!0x0,document[_0x4e7ef5(0x1df)](_0x4e7ef5(0x1f4),enableAudio,{'once':!0x0}),window[_0x4e7ef5(0x1df)](_0x4e7ef5(0x1d7),resizeCanvas);const trackRadios=document[_0x4e7ef5(0x17d)](_0x4e7ef5(0x1d2));trackRadios[_0x4e7ef5(0x1de)](_0x4d73bf=>{const _0x4da7f9=_0x4e7ef5;_0x4d73bf[_0x4da7f9(0x1df)](_0x4da7f9(0x1e1),function(){const _0x599e94=_0x4da7f9;this[_0x599e94(0x183)]&&(currentTrack=trackConfigs[this['value']],computeBuoys());});});const maxSpeed=0x64,timeToMaxSpeed=0x12,accelRate=maxSpeed/0x12,decelRate=12.333,speedConversion=0.6,speedScale=0.837,BANK_ANGLE_MAX=0x37,bankRate0to30=0x28,bankRate30to55=0xa;let bankAngleDeg=0x0;const bankDecay=0.9;function updateBankAngle(_0xa621b5){const _0x4c2ae5=_0x4e7ef5;let _0x576b3a=0x0;if(keys[_0x4c2ae5(0x1b3)]&&(_0x576b3a=-0x1),keys['ArrowRight']&&(_0x576b3a=0x1),0x0!==_0x576b3a){let _0x59e24b=Math[_0x4c2ae5(0x17f)](bankAngleDeg),_0x328f8b=Math[_0x4c2ae5(0x1b9)](bankAngleDeg);0x0===_0x328f8b&&(_0x328f8b=_0x576b3a),_0x328f8b!==_0x576b3a&&(_0x59e24b=0x0,bankAngleDeg=0x0,_0x328f8b=_0x576b3a),_0x59e24b+=(_0x59e24b<0x1e?bankRate0to30:bankRate30to55)*_0xa621b5,_0x59e24b>BANK_ANGLE_MAX&&(_0x59e24b=BANK_ANGLE_MAX),bankAngleDeg=_0x328f8b*_0x59e24b;}else{if(Math['abs'](bankAngleDeg)<0.5)bankAngleDeg=0x0;else{const _0x46fbb5=Math[_0x4c2ae5(0x19d)](bankDecay,0x3c*_0xa621b5);bankAngleDeg*=_0x46fbb5,Math[_0x4c2ae5(0x17f)](bankAngleDeg)<0.05&&(bankAngleDeg=0x0);}}}const baseline30Data=[{'speed':0xa,'radius':0xa},{'speed':0xf,'radius':0xf},{'speed':0x1e,'radius':0x1e},{'speed':0x28,'radius':0x41},{'speed':0x3c,'radius':0x50}],reduceData=[{'speed':0xa,'factor':0.85},{'speed':0xf,'factor':0.82},{'speed':0x1e,'factor':0.83},{'speed':0x28,'factor':0.85},{'speed':0x3c,'factor':0.9}];function interpPiecewise(_0x48d435,_0x31263c){const _0x5e4f90=_0x4e7ef5;let _0x48f694=Math[_0x5e4f90(0x18e)](0xa,Math[_0x5e4f90(0x1e3)](0x3c,_0x31263c));for(let _0x64dfb7=0x1;_0x64dfb7<_0x48d435['length'];_0x64dfb7++){const _0xe5eba1=_0x48d435[_0x64dfb7-0x1],_0x21e220=_0x48d435[_0x64dfb7];if(_0x48f694>=_0xe5eba1['speed']&&_0x48f694<=_0x21e220[_0x5e4f90(0x1d1)]){const _0x259714=_0x21e220['speed']-_0xe5eba1['speed'],_0xf5298a=(_0x48f694-_0xe5eba1[_0x5e4f90(0x1d1)])/_0x259714,_0x4eeb23=void 0x0!==_0xe5eba1['radius']?_0xe5eba1[_0x5e4f90(0x1ee)]:_0xe5eba1['factor'];return _0x4eeb23+((void 0x0!==_0x21e220[_0x5e4f90(0x1ee)]?_0x21e220['radius']:_0x21e220[_0x5e4f90(0x19e)])-_0x4eeb23)*_0xf5298a;}}if(_0x48f694<=_0x48d435[0x0][_0x5e4f90(0x1d1)])return void 0x0!==_0x48d435[0x0]['radius']?_0x48d435[0x0][_0x5e4f90(0x1ee)]:_0x48d435[0x0][_0x5e4f90(0x19e)];const _0xeda126=_0x48d435[_0x48d435[_0x5e4f90(0x1b1)]-0x1];return void 0x0!==_0xeda126['radius']?_0xeda126[_0x5e4f90(0x1ee)]:_0xeda126[_0x5e4f90(0x19e)];}function getTurnRadius(_0x237d11,_0x29329f){const _0x2e0be7=_0x4e7ef5;let _0x260a5d=Math['max'](0x0,Math[_0x2e0be7(0x1e3)](0x37,_0x29329f));const _0x297790=interpPiecewise(baseline30Data,_0x237d11),_0x1841c5=_0x297790*interpPiecewise(reduceData,_0x237d11);if(_0x260a5d<0x1e){const _0x21cdb8=0x1388;return _0x21cdb8+_0x260a5d/0x1e*(_0x297790-_0x21cdb8);}if(_0x260a5d<=0x32)return _0x297790+(_0x260a5d-0x1e)/0x14*(_0x1841c5-_0x297790);return _0x1841c5;}const turnGain=0xf,lowFactor=0.02084;let heading=0x0,speed=0x0;const pos={'x':0x0,'y':0x0};let oldPos={'x':0x0,'y':0x0},lapActive=!0x1,lapStartTime=0x0,currentLapTime=0x0;const laps=[];let distanceTraveled=0x0,topSpeedKmh=0x0,minSpeedKmh=0x1/0x0,sumSpeeds=0x0,frameCount=0x0,lastPosTelemetry={'x':0x0,'y':0x0},collidedThisLap=!0x1,penaltySeconds=0x0,ghostData=null,recordedGhost=[];function _0x1cd8(){const _0x4b177f=['restore','radius','windAudio','Collision\x20audio\x20fail','968150JNEAoW','15lfYiIj','map','keydown','arc','push','Ghost\x20data\x20cleared.','shift','href','catch','\x20\x20TopSpd:\x20','parse','Lap\x20','querySelectorAll','Ghost\x20data\x20imported\x20successfully!\x20It\x20will\x20appear\x20on\x20your\x20next\x20lap.','abs','fillRect','#222','slice','checked','1427634oiBNfZ','innerHeight','\x20(-\x20','hypot','getElementById','#fff','fill','click','#00ccff','topSpeed','max','finalTime','9TSYPYZ','removeEventListener','closePath','application/json','heading','exportGhostBtn','lineWidth','appendChild','1226083ZPCveQ','lapData.json','importGhostFile','\x20\x20Dist:\x20\x20\x20','Laptime:\x20','pow','factor','translate','width','947068TPkdsX','beginPath','6138336mQwHoI','clearRect','Telemetry:','Invalid\x20ghost\x20data\x20file.','ArrowDown','bezierCurveTo','stringify','lineTo','\x20\x20MinSpd:\x20','gameCanvas','scale','sin','currentTime','strokeStyle','length','save','ArrowLeft','clearGhostBtn','removeChild','rotate','Bank:\x20','globalAlpha','sign','volume','createElement','speedDisplay','6569704fawfaq','body','computeTimingLine','distance','ArrowUp','font','toFixed','now','innerText','innerWidth','s\x20penalty!)','height','cos','target','lapTimeDisplay','\x20km/h','speedTrack','fillStyle','bankAngleDisplay','key','speed','input[name=\x22track\x22]','fillText','Boom\x20stop\x20fail','download','unshift','resize','Speed:\x20','getContext','stroke','collisionAudio','moveTo','warn','forEach','addEventListener','pause','change','text','min','avgSpeed','isArray','10024077MgdrtD','pop','time','No\x20ghost\x20data\x20to\x20export\x20yet.\x20Complete\x20at\x20least\x20one\x20lap.','paused','keyup','play'];_0x1cd8=function(){return _0x4b177f;};return _0x1cd8();}function recordGhostData(_0x3cf370){const _0x2ce9c8=_0x4e7ef5;lapActive&&recordedGhost[_0x2ce9c8(0x175)]({'time':_0x3cf370,'x':pos['x'],'y':pos['y'],'heading':heading});}function getGhostPosition(_0x1fcfce){const _0x4e9ff2=_0x4e7ef5;if(!ghostData||0x0===ghostData[_0x4e9ff2(0x1b1)])return null;for(let _0x5ebffe=0x1;_0x5ebffe<ghostData[_0x4e9ff2(0x1b1)];_0x5ebffe++){const _0x2f1562=ghostData[_0x5ebffe-0x1],_0xf3375e=ghostData[_0x5ebffe];if(_0x2f1562[_0x4e9ff2(0x1e8)]<=_0x1fcfce&&_0xf3375e[_0x4e9ff2(0x1e8)]>=_0x1fcfce){const _0x47e9f3=(_0x1fcfce-_0x2f1562['time'])/(_0xf3375e[_0x4e9ff2(0x1e8)]-_0x2f1562[_0x4e9ff2(0x1e8)]);return{'x':_0x2f1562['x']+_0x47e9f3*(_0xf3375e['x']-_0x2f1562['x']),'y':_0x2f1562['y']+_0x47e9f3*(_0xf3375e['y']-_0x2f1562['y']),'heading':_0x2f1562[_0x4e9ff2(0x194)]+_0x47e9f3*(_0xf3375e[_0x4e9ff2(0x194)]-_0x2f1562['heading'])};}}const _0xd2dcd0=ghostData[ghostData['length']-0x1];return _0x1fcfce>_0xd2dcd0[_0x4e9ff2(0x1e8)]?_0xd2dcd0:ghostData[0x0];}function drawGhost(_0x5957ee){const _0x5ec3bb=_0x4e7ef5;if(!lapActive||!ghostData)return;const _0x39896e=getGhostPosition(_0x5957ee);_0x39896e&&(ctx[_0x5ec3bb(0x1b2)](),ctx[_0x5ec3bb(0x1b8)]=0.25,ctx['translate'](_0x39896e['x'],_0x39896e['y']),ctx[_0x5ec3bb(0x1b6)](_0x39896e[_0x5ec3bb(0x194)]-Math['PI']/0x2),ctx[_0x5ec3bb(0x1a2)](),ctx[_0x5ec3bb(0x1dc)](0x0,12.5),ctx[_0x5ec3bb(0x1a8)](0x4,7.5,0x4,-7.5,0x0,-12.5),ctx[_0x5ec3bb(0x1a8)](-0x4,-7.5,-0x4,7.5,0x0,12.5),ctx[_0x5ec3bb(0x192)](),ctx[_0x5ec3bb(0x1ce)]='#ff88ff',ctx[_0x5ec3bb(0x18a)](),ctx['restore'](),ctx[_0x5ec3bb(0x1b8)]=0x1);}function startLap(){const _0x330d80=_0x4e7ef5;lapStartTime=performance[_0x330d80(0x1c4)](),currentLapTime=0x0,lapActive=!0x0,distanceTraveled=0x0,topSpeedKmh=0x0,minSpeedKmh=0x1/0x0,sumSpeeds=0x0,frameCount=0x0,lastPosTelemetry['x']=pos['x'],lastPosTelemetry['y']=pos['y'],collidedThisLap=!0x1,penaltySeconds=0x0,recordedGhost=[];}function finalizeLap(){const _0x14efa2=_0x4e7ef5;lapActive=!0x1;const _0x2cfd14=(performance[_0x14efa2(0x1c4)]()-lapStartTime)/0x3e8;currentLapTime=_0x2cfd14+penaltySeconds;const _0x1d86a2=frameCount>0x0?sumSpeeds/frameCount:0x0;laps[_0x14efa2(0x1d6)]({'topSpeed':topSpeedKmh,'minSpeed':minSpeedKmh===0x1/0x0?0x0:minSpeedKmh,'avgSpeed':_0x1d86a2,'distance':distanceTraveled,'finalTime':currentLapTime}),laps[_0x14efa2(0x1b1)]>0x4&&laps[_0x14efa2(0x1e7)](),ghostData=recordedGhost[_0x14efa2(0x182)]();}const keys={};function orientation(_0xaa7d54,_0x45eadc,_0xff6945){return(_0x45eadc['y']-_0xaa7d54['y'])*(_0xff6945['x']-_0x45eadc['x'])-(_0x45eadc['x']-_0xaa7d54['x'])*(_0xff6945['y']-_0x45eadc['y']);}function linesIntersect(_0x10c173,_0x15f408,_0x59fa03,_0x6d4a01,_0x4b97f4,_0x1be9e1,_0x1eb1d6,_0x504076){const _0xf5b6a1={'x':_0x10c173,'y':_0x15f408},_0xe8a3af={'x':_0x59fa03,'y':_0x6d4a01},_0x44e24b={'x':_0x4b97f4,'y':_0x1be9e1},_0x3dfc9d={'x':_0x1eb1d6,'y':_0x504076},_0x4339e0=orientation(_0xf5b6a1,_0xe8a3af,_0x44e24b),_0xc40e13=orientation(_0xf5b6a1,_0xe8a3af,_0x3dfc9d),_0x548291=orientation(_0x44e24b,_0x3dfc9d,_0xf5b6a1),_0x47fe58=orientation(_0x44e24b,_0x3dfc9d,_0xe8a3af);return(_0x4339e0>0x0&&_0xc40e13<0x0||_0x4339e0<0x0&&_0xc40e13>0x0)&&(_0x548291>0x0&&_0x47fe58<0x0||_0x548291<0x0&&_0x47fe58>0x0);}function checkLapCrossing(){const _0x5d5e20=_0x4e7ef5;0x0!==pos['x']&&pos['x']!==canvas['width']&&0x0!==pos['y']&&pos['y']!==canvas['height']&&linesIntersect(oldPos['x'],oldPos['y'],pos['x'],pos['y'],timingLine['x1'],timingLine['y1'],timingLine['x2'],timingLine['y2'])&&(lapActive?(finalizeLap(),boomStopAudio['currentTime']=0x0,boomStopAudio[_0x5d5e20(0x1ec)]()[_0x5d5e20(0x179)](_0x375409=>console[_0x5d5e20(0x1dd)](_0x5d5e20(0x1d4),_0x375409)),fadeOutMusic()):(startLap(),musicAudio[_0x5d5e20(0x1ba)]=0x1,musicAudio[_0x5d5e20(0x1af)]=0x0,musicAudio[_0x5d5e20(0x1ec)]()[_0x5d5e20(0x179)](_0x56edc3=>console[_0x5d5e20(0x1dd)]('Music\x20play\x20fail',_0x56edc3))));}function checkBuoyCollisions(){const _0x3781b4=_0x4e7ef5;if(lapActive&&!collidedThisLap)for(const _0x3d517b of buoys){const _0x186dba=_0x3d517b['x']-pos['x'],_0x3e249b=_0x3d517b['y']-pos['y'];if(Math['hypot'](_0x186dba,_0x3e249b)<0xc){penaltySeconds+=0xa,collidedThisLap=!0x0,collisionAudio[_0x3781b4(0x1af)]=0x0,collisionAudio['play']()['catch'](_0x3f470c=>console[_0x3781b4(0x1dd)](_0x3781b4(0x1f0),_0x3f470c));break;}}}function update(_0x181d69){const _0x3ffbd=_0x4e7ef5;oldPos['x']=pos['x'],oldPos['y']=pos['y'],keys[_0x3ffbd(0x1c1)]&&(speed+=accelRate*_0x181d69),keys[_0x3ffbd(0x1a7)]&&(speed-=decelRate*_0x181d69),speed=Math['max'](0x0,Math[_0x3ffbd(0x1e3)](maxSpeed,speed)),updateBankAngle(_0x181d69);const _0x27090d=speed*speedConversion,_0x3bbcda=getTurnRadius(_0x27090d,Math[_0x3ffbd(0x17f)](bankAngleDeg)),_0x2eca44=bankAngleDeg*Math['PI']/0xb4,_0x354844=Math[_0x3ffbd(0x1b9)](bankAngleDeg)*(Math[_0x3ffbd(0x17f)](_0x2eca44)*turnGain)*(0x1/_0x3bbcda+lowFactor);heading+=_0x354844*_0x181d69,pos['x']+=speed*speedScale*_0x181d69*Math[_0x3ffbd(0x1c9)](heading),pos['y']+=speed*speedScale*_0x181d69*Math[_0x3ffbd(0x1ae)](heading);let _0x5988be=!0x1;if(pos['x']>canvas[_0x3ffbd(0x1a0)]?(pos['x']=0x0,_0x5988be=!0x0):pos['x']<0x0&&(pos['x']=canvas['width'],_0x5988be=!0x0),pos['y']>canvas[_0x3ffbd(0x1c8)]?(pos['y']=0x0,_0x5988be=!0x0):pos['y']<0x0&&(pos['y']=canvas[_0x3ffbd(0x1c8)],_0x5988be=!0x0),windAudio[_0x3ffbd(0x1ba)]=speed/maxSpeed,document['getElementById'](_0x3ffbd(0x1bc))[_0x3ffbd(0x1c5)]=_0x3ffbd(0x1d8)+_0x27090d[_0x3ffbd(0x1c3)](0x1)+_0x3ffbd(0x1cc),document['getElementById'](_0x3ffbd(0x1cf))[_0x3ffbd(0x1c5)]=_0x3ffbd(0x1b7)+bankAngleDeg[_0x3ffbd(0x1c3)](0x0)+'°',_0x5988be||checkLapCrossing(),lapActive){_0x27090d>topSpeedKmh&&(topSpeedKmh=_0x27090d),_0x27090d<minSpeedKmh&&(minSpeedKmh=_0x27090d),sumSpeeds+=_0x27090d,frameCount++;const _0x4ea4e2=pos['x']-lastPosTelemetry['x'],_0x4b0bb2=pos['y']-lastPosTelemetry['y'],_0x788fc3=Math[_0x3ffbd(0x187)](_0x4ea4e2,_0x4b0bb2)/currentTrack[_0x3ffbd(0x1ad)];distanceTraveled+=_0x788fc3,lastPosTelemetry['x']=pos['x'],lastPosTelemetry['y']=pos['y'],checkBuoyCollisions();const _0x1f7d04=(performance[_0x3ffbd(0x1c4)]()-lapStartTime)/0x3e8;recordGhostData(_0x1f7d04);const _0x5ef023=_0x1f7d04+penaltySeconds;document[_0x3ffbd(0x188)]('lapTimeDisplay')['innerText']=penaltySeconds>0x0&&collidedThisLap?_0x3ffbd(0x19c)+_0x5ef023[_0x3ffbd(0x1c3)](0x2)+_0x3ffbd(0x186)+penaltySeconds+_0x3ffbd(0x1c7):_0x3ffbd(0x19c)+_0x5ef023[_0x3ffbd(0x1c3)](0x2);}else document[_0x3ffbd(0x188)](_0x3ffbd(0x1cb))[_0x3ffbd(0x1c5)]=penaltySeconds>0x0?_0x3ffbd(0x19c)+currentLapTime[_0x3ffbd(0x1c3)](0x2)+'\x20(-\x20'+penaltySeconds+_0x3ffbd(0x1c7):'Laptime:\x20'+currentLapTime[_0x3ffbd(0x1c3)](0x2);}document['addEventListener']('keydown',_0x4491f3=>{const _0x1ffe54=_0x4e7ef5;keys[_0x4491f3[_0x1ffe54(0x1d0)]]=!0x0;}),document[_0x4e7ef5(0x1df)](_0x4e7ef5(0x1eb),_0x5f161a=>{const _0x294450=_0x4e7ef5;keys[_0x5f161a[_0x294450(0x1d0)]]=!0x1;});function _0x24a9(_0x25f799,_0x46bc86){const _0x1cd823=_0x1cd8();return _0x24a9=function(_0x24a911,_0x56fd15){_0x24a911=_0x24a911-0x174;let _0x26ac35=_0x1cd823[_0x24a911];return _0x26ac35;},_0x24a9(_0x25f799,_0x46bc86);}let wakeTrail=[];function totalTrailDistance(_0x4dbcd6){const _0x545aea=_0x4e7ef5;let _0x5cce32=0x0;for(let _0x43f570=0x1;_0x43f570<_0x4dbcd6[_0x545aea(0x1b1)];_0x43f570++)_0x5cce32+=Math['hypot'](_0x4dbcd6[_0x43f570]['x']-_0x4dbcd6[_0x43f570-0x1]['x'],_0x4dbcd6[_0x43f570]['y']-_0x4dbcd6[_0x43f570-0x1]['y']);return _0x5cce32;}function drawWake(){const _0x5317b9=_0x4e7ef5;if(!(wakeTrail['length']<0x2))for(let _0x4ea5f2=0x1;_0x4ea5f2<wakeTrail['length'];_0x4ea5f2++){const _0x14233e=_0x4ea5f2/wakeTrail[_0x5317b9(0x1b1)];ctx['beginPath'](),ctx['moveTo'](wakeTrail[_0x4ea5f2-0x1]['x'],wakeTrail[_0x4ea5f2-0x1]['y']),ctx[_0x5317b9(0x1aa)](wakeTrail[_0x4ea5f2]['x'],wakeTrail[_0x4ea5f2]['y']),ctx[_0x5317b9(0x1b0)]='rgba(255,255,255,'+_0x14233e['toFixed'](0x2)+')',ctx['lineWidth']=0x2,ctx['stroke']();}}function drawTrack(){const _0x1424b6=_0x4e7ef5;buoys[_0x1424b6(0x1de)](_0x3f3d82=>{const _0x1278cb=_0x1424b6;ctx[_0x1278cb(0x1a2)](),ctx[_0x1278cb(0x174)](_0x3f3d82['x'],_0x3f3d82['y'],0x8,0x0,0x2*Math['PI']),ctx[_0x1278cb(0x1ce)]='#FFFF00',ctx[_0x1278cb(0x18a)](),ctx[_0x1278cb(0x196)]=0x2,ctx[_0x1278cb(0x1b0)]=_0x1278cb(0x189),ctx[_0x1278cb(0x1da)]();}),ctx[_0x1424b6(0x1a2)](),ctx[_0x1424b6(0x1dc)](timingLine['x1'],timingLine['y1']),ctx['lineTo'](timingLine['x2'],timingLine['y2']),ctx[_0x1424b6(0x1b0)]='red',ctx[_0x1424b6(0x196)]=0x1,ctx[_0x1424b6(0x1da)]();}function drawTelemetry(){const _0x518228=_0x4e7ef5;ctx[_0x518228(0x1b2)](),ctx[_0x518228(0x1c2)]='14px\x20monospace',ctx[_0x518228(0x1ce)]=_0x518228(0x189);let _0x31ffe6=0x14,_0xb1a651=0x32;ctx[_0x518228(0x1d3)](_0x518228(0x1a5),_0x31ffe6,_0xb1a651),_0xb1a651+=0x14,laps[_0x518228(0x1de)]((_0x595511,_0x56a304)=>{const _0x260756=_0x518228;ctx[_0x260756(0x1d3)](_0x260756(0x17c)+(_0x56a304+0x1)+':',_0x31ffe6,_0xb1a651),_0xb1a651+=0x12,ctx['fillText']('\x20\x20Time:\x20\x20\x20'+_0x595511[_0x260756(0x18f)][_0x260756(0x1c3)](0x2)+'\x20s',_0x31ffe6,_0xb1a651),_0xb1a651+=0x12,ctx['fillText'](_0x260756(0x19b)+_0x595511[_0x260756(0x1c0)][_0x260756(0x1c3)](0x1)+'\x20m',_0x31ffe6,_0xb1a651),_0xb1a651+=0x12,ctx[_0x260756(0x1d3)](_0x260756(0x17a)+_0x595511[_0x260756(0x18d)][_0x260756(0x1c3)](0x1)+_0x260756(0x1cc),_0x31ffe6,_0xb1a651),_0xb1a651+=0x12,ctx['fillText'](_0x260756(0x1ab)+_0x595511['minSpeed'][_0x260756(0x1c3)](0x1)+_0x260756(0x1cc),_0x31ffe6,_0xb1a651),_0xb1a651+=0x12,ctx['fillText']('\x20\x20AvgSpd:\x20'+_0x595511[_0x260756(0x1e4)][_0x260756(0x1c3)](0x1)+_0x260756(0x1cc),_0x31ffe6,_0xb1a651),_0xb1a651+=0x18;}),ctx[_0x518228(0x1ed)]();}function drawRacer(){const _0x3832f8=_0x4e7ef5;ctx['save'](),ctx[_0x3832f8(0x19f)](pos['x'],pos['y']),ctx[_0x3832f8(0x1b6)](heading-Math['PI']/0x2),ctx[_0x3832f8(0x1a2)](),ctx['moveTo'](0x0,12.5),ctx['bezierCurveTo'](0x4,7.5,0x4,-7.5,0x0,-12.5),ctx[_0x3832f8(0x1a8)](-0x4,-7.5,-0x4,7.5,0x0,12.5),ctx[_0x3832f8(0x192)](),ctx[_0x3832f8(0x1ce)]=_0x3832f8(0x18c),ctx['fill'](),ctx[_0x3832f8(0x1ed)]();}function drawGhostFrame(){const _0x542455=_0x4e7ef5;if(lapActive)drawGhost((performance[_0x542455(0x1c4)]()-lapStartTime)/0x3e8);else drawGhost(currentLapTime);}let lastTimestamp=0x0;function gameLoop(_0x204474){const _0x5e423f=_0x4e7ef5;lastTimestamp||(lastTimestamp=_0x204474);let _0x209baf=(_0x204474-lastTimestamp)/0x3e8;lastTimestamp=_0x204474,_0x209baf>0.1&&(_0x209baf=0.1),wakeTrail[_0x5e423f(0x175)]({'x':pos['x'],'y':pos['y']});const _0x45d206=speed/maxSpeed*0xc8;for(;wakeTrail[_0x5e423f(0x1b1)]>0x1&&totalTrailDistance(wakeTrail)>_0x45d206;)wakeTrail[_0x5e423f(0x177)]();update(_0x209baf),ctx[_0x5e423f(0x1a4)](0x0,0x0,canvas[_0x5e423f(0x1a0)],canvas['height']),ctx['fillStyle']=_0x5e423f(0x181),ctx[_0x5e423f(0x180)](0x0,0x0,canvas[_0x5e423f(0x1a0)],canvas[_0x5e423f(0x1c8)]),drawTrack(),drawWake(),drawGhostFrame(),drawRacer(),drawTelemetry(),requestAnimationFrame(gameLoop);}const exportGhostBtn=document[_0x4e7ef5(0x188)](_0x4e7ef5(0x195)),importGhostFile=document['getElementById'](_0x4e7ef5(0x19a)),clearGhostBtn=document['getElementById'](_0x4e7ef5(0x1b4));exportGhostBtn[_0x4e7ef5(0x1df)](_0x4e7ef5(0x18b),()=>{const _0x2ef97f=_0x4e7ef5;if(!ghostData||0x0===ghostData[_0x2ef97f(0x1b1)])return void alert(_0x2ef97f(0x1e9));const _0x114935=JSON[_0x2ef97f(0x1a9)](ghostData),_0x4a7c4e=new Blob([_0x114935],{'type':_0x2ef97f(0x193)}),_0x46d68f=URL['createObjectURL'](_0x4a7c4e),_0xb51948=document[_0x2ef97f(0x1bb)]('a');_0xb51948[_0x2ef97f(0x178)]=_0x46d68f,_0xb51948[_0x2ef97f(0x1d5)]=_0x2ef97f(0x199),document['body'][_0x2ef97f(0x197)](_0xb51948),_0xb51948['click'](),document[_0x2ef97f(0x1be)][_0x2ef97f(0x1b5)](_0xb51948),URL['revokeObjectURL'](_0x46d68f);}),importGhostFile[_0x4e7ef5(0x1df)](_0x4e7ef5(0x1e1),async _0x376de5=>{const _0x26a1f4=_0x4e7ef5,_0x1af3dd=_0x376de5[_0x26a1f4(0x1ca)]['files'][0x0];if(_0x1af3dd)try{const _0x2c5a38=await _0x1af3dd[_0x26a1f4(0x1e2)](),_0x502308=JSON[_0x26a1f4(0x17b)](_0x2c5a38);Array[_0x26a1f4(0x1e5)](_0x502308)&&_0x502308[_0x26a1f4(0x1b1)]>0x0?(ghostData=_0x502308,alert(_0x26a1f4(0x17e))):alert(_0x26a1f4(0x1a6));}catch(_0x1cdeb3){alert('Failed\x20to\x20read\x20file:\x20'+_0x1cdeb3);}}),clearGhostBtn['addEventListener'](_0x4e7ef5(0x18b),()=>{const _0x1d6f7b=_0x4e7ef5;ghostData=null,alert(_0x1d6f7b(0x176));}),resizeCanvas(),pos['x']=canvas[_0x4e7ef5(0x1a0)]/0x2,pos['y']=canvas[_0x4e7ef5(0x1c8)]/0x2,requestAnimationFrame(gameLoop);
